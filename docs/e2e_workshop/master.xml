<?xml version="1.0" encoding="UTF-8"?>
<?asciidoc-toc maxdepth="3"?>
<?asciidoc-numbered?>
<book xmlns="http://docbook.org/ns/docbook" xmlns:xl="http://www.w3.org/1999/xlink" version="5.0" xml:lang="en">
<info>
<title>End to End Tutorial</title>
<date>2017-10-15</date>
</info>
<part xml:id="before_you_start">
<title>Before You Start</title>
<chapter xml:id="support">
<title>Getting Support</title>
<simpara>The OpenShift.io support chat channel is currently the best way to ask questions or get support for OpenShift.io at any time.</simpara>
<orderedlist numeration="arabic">
<listitem>
<simpara>Sign up at <link xl:href="https://chat.openshift.io/signup_email">https://chat.openshift.io/signup_email</link></simpara>
</listitem>
<listitem>
<simpara>Add your details and click <guibutton>Create Account</guibutton> to register.</simpara>
</listitem>
<listitem>
<simpara>In your email inbox, click the <emphasis role="strong">Verify Email</emphasis> link.</simpara>
</listitem>
<listitem>
<simpara>Sign in when prompted and you are redirected to the <literal>#openshiftio</literal> channel.</simpara>
</listitem>
<listitem>
<simpara>Ask a specific person your question or start with <literal>@here</literal> to tag everyone present in the channel.</simpara>
</listitem>
</orderedlist>
</chapter>
<chapter xml:id="prereqs">
<title>Prerequisites</title>
<simpara><emphasis role="strong">Browser Requirements:</emphasis></simpara>
<orderedlist numeration="arabic">
<listitem>
<simpara>Currently, only Google chrome can be used with OpenShift.io. Additional browsers will be added here as they are tested.</simpara>
</listitem>
<listitem>
<simpara>Ensure that you run OpenShift.io in Chrome&#8217;s <emphasis role="strong">Incognito Mode</emphasis>. This is required because troubleshooting or other functions require clearing your browser&#8217;s history.</simpara>
</listitem>
</orderedlist>
<simpara><emphasis role="strong">General Requirements:</emphasis></simpara>
<orderedlist numeration="arabic">
<listitem>
<simpara>Ensure that you have a GitHub account.</simpara>
</listitem>
<listitem>
<simpara>Sign up for an OpenShift Online account at <link xl:href="https://www.openshift.com/">https://www.openshift.com/</link>.</simpara>
</listitem>
<listitem>
<simpara>Register to join the OpenShift.io developer preview at <link xl:href="https://openshift.io/">https://openshift.io/</link>.</simpara>
</listitem>
</orderedlist>
</chapter>
<chapter xml:id="connect_os">
<title>Connect OpenShift.io to OpenShift Online and GitHub</title>
<simpara>You will receive a welcome email when your request to join Red Hat&#8217;s OpenShift.io Developer Preview is accepted. When you receive this email, use the following steps to set up OpenShift.io:</simpara>
<orderedlist numeration="arabic">
<listitem>
<simpara>Use Chrome&#8217;s <emphasis role="strong">Incognito mode</emphasis> to navigate to <link xl:href="https://openshift.io/">https://openshift.io/</link></simpara>
</listitem>
<listitem>
<simpara>Log in using your Red Hat Developer (or other listed services) credentials.</simpara>
</listitem>
<listitem>
<simpara>In the <literal>Getting Started in OpenShift.io</literal> page, select the <emphasis role="strong">GitHub</emphasis> and <emphasis role="strong">OpenShift.com</emphasis> check boxes and click <emphasis role="strong">Connect accounts</emphasis>.</simpara>
</listitem>
<listitem>
<simpara>Log in to your GitHub account and, when prompted, click <emphasis role="strong">Authorize openshiftio-private</emphasis> to connect your GitHub account to your OpenShift.io account.</simpara>
</listitem>
<listitem>
<simpara>Log in to your OpenShift Online account and, when prompted, click <emphasis role="strong">Allow selected permissions</emphasis> to connect your OpenShift Online account to your OpenShift.io account.</simpara>
</listitem>
<listitem>
<simpara>You are redirected to the <literal>Getting Started in OpenShift.io</literal> with green check marks indicating that you have successfully connected your GitHub and OpenShift Online accounts.</simpara>
</listitem>
<listitem>
<simpara>Click <emphasis role="strong">Get Started</emphasis> to start using OpenShift.io.</simpara>
</listitem>
</orderedlist>
</chapter>
<chapter xml:id="che_jenkins_status">
<title>Confirm Che and Jenkins Status</title>
<simpara>After connecting your OpenShift Online account to OpenShift.io, the Che and Jenkins tenant services must be provisioned. This process requires several minutes. Use the following instructions to confirm that Che and Jenkins are ready to use:</simpara>
<orderedlist numeration="arabic">
<listitem>
<simpara>To check the Che and Jenkins status, click the check mark icon at the top right of the page. If the status indicates that all services are ready (see screen capture), Che and Jenkins are provisioned.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/tenant_status.png"/>
</imageobject>
<textobject><phrase>Tenant Status</phrase></textobject>
</mediaobject>
</informalfigure>
</listitem>
<listitem>
<simpara>Confirm the version numbers displayed for your Che and Jenkins are the most recent versions:</simpara>
<orderedlist numeration="loweralpha">
<listitem>
<simpara>Confirm the latest Che version using <link xl:href="https://github.com/fabric8-services/fabric8-tenant/blob/master/TEAM_VERSION">the OpenShift.io GitHub repository</link>.</simpara>
</listitem>
<listitem>
<simpara>Confirm the latest version of Jenkins by asking in the support channel (<literal>#openshiftio</literal> on MatterMost). See <link xl:href="support.xml#support">support.xml</link> for details.</simpara>
</listitem>
</orderedlist>
</listitem>
<listitem>
<simpara>To update your Che and Jenkins versions:</simpara>
<orderedlist numeration="loweralpha">
<listitem>
<simpara>In your OpenShift.io home page, click your name on the top right corner of the screen.</simpara>
</listitem>
<listitem>
<simpara>In the drop down options, click <emphasis role="strong">Profile</emphasis>.</simpara>
</listitem>
<listitem>
<simpara>In the profile page, click <emphasis role="strong">Update Profile</emphasis>.</simpara>
</listitem>
<listitem>
<simpara>Scroll to the bottom of the page and click <emphasis role="strong">Update tenant</emphasis>. This initiates an update in your OpenShift Online account.</simpara>
</listitem>
<listitem>
<simpara>Allow approximately five minutes for the version numbers in the status display to refresh. Yellow triangle icons (see screen capture) appear while tenant updates Che and Jenkins. When the update is complete, the green check marks appear with the updated version numbers for Che and Jenkins.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/tenant_status_error.png"/>
</imageobject>
<textobject><phrase>Tenant Status Error</phrase></textobject>
</mediaobject>
</informalfigure>
</listitem>
</orderedlist>
</listitem>
</orderedlist>
</chapter>
</part>
<part xml:id="_start_using_openshift_io">
<title>Start Using OpenShift.io</title>
<chapter xml:id="hw_dev">
<title>Hello World for Developers</title>
<section xml:id="create_space_proj">
<title>Creating a New Space</title>
<simpara>In OpenShift.io, the first step for any new project is to create a new Space. Users can be assigned specific permissions for various Spaces and all the work done is in the context of the Space. Each Space must have a unique name. Create a new space as follows:</simpara>
<orderedlist numeration="arabic">
<listitem>
<simpara>In the OpenShift.io home page, click <emphasis role="strong">Create a space</emphasis>.</simpara>
</listitem>
<listitem>
<simpara>In the dialog box, add a unique name for your space.</simpara>
</listitem>
<listitem>
<simpara>Use the drop-down menu for the <literal>Templates</literal> field to select a template for your new Space. For this example, select <emphasis role="strong">Scenario Driven Planning</emphasis> and click <guibutton>Create</guibutton>.</simpara>
</listitem>
<listitem>
<simpara>The <literal>How would you like to get started?</literal> menu appears for your new space. If this menu does not appear automatically, use the following steps:</simpara>
<orderedlist numeration="loweralpha">
<listitem>
<simpara>Double-click the name of the relevant Space from the list under <literal>Recent spaces</literal>.</simpara>
</listitem>
<listitem>
<simpara>In the resulting <literal>Analyze</literal> screen for the Space, click <guibutton>Add to space</guibutton> in the top right corner to view the <literal>How would you like to get started?</literal> menu.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/get_started_menu.png"/>
</imageobject>
<textobject><phrase>How would you like to get started menu</phrase></textobject>
</mediaobject>
</informalfigure>
</listitem>
</orderedlist>
</listitem>
</orderedlist>
</section>
<section xml:id="pipelines">
<title>Working With Pipelines</title>
<simpara>A new build/pipeline execution initiates immediately after a new Quickstart project is created. In a build pipeline, <emphasis role="strong">Stage</emphasis> and <emphasis role="strong">Run</emphasis> are individual OpenShift projects. <literal>Stage</literal> is a production staging area to review and test changes before they are finalized and staged on <literal>Run</literal>.</simpara>
<simpara>The new build pipeline pushes version 1.0.1 of your new project into <emphasis role="strong">Stage</emphasis> and then, after user approval, to <emphasis role="strong">Run</emphasis>.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/pipeline_running.png"/>
</imageobject>
<textobject><phrase>A Running Pipeline Build</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>Optionally, view the build pipeline&#8217;s details in OpenShift Online:</simpara>
<orderedlist numeration="arabic">
<listitem>
<simpara>In the <literal>Pipeline</literal> page, click <literal>Build #1</literal> for the build pipeline in progress.</simpara>
</listitem>
<listitem>
<simpara>When redirected, log into your OpenShift Online account.</simpara>
</listitem>
<listitem>
<simpara>Click <emphasis role="strong">View Log</emphasis> to view the Jenkins instance&#8217;s logs.</simpara>
</listitem>
</orderedlist>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/oso_pipeline.png"/>
</imageobject>
<textobject><phrase>A Running Pipeline Build in OpenShift Online</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
<section xml:id="view_proj_gh">
<title>Viewing Your Project in GitHub</title>
<simpara>After reviewing your pipeline build running in OpenShift Online and OpenShift.io, view your project&#8217;s code in GitHub as follows:</simpara>
<orderedlist numeration="arabic">
<listitem>
<simpara>Return to your Space&#8217;s dashboard. From the OpenShift.io home page, click the name of the Space to view its dashboard.</simpara>
</listitem>
<listitem>
<simpara>In the <literal>Codebases</literal> part of the dashboard, click the name of your project&#8217;s codebase. This takes you to your project&#8217;s code in GitHub.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/proj.gh.png"/>
</imageobject>
<textobject><phrase>Project Code in GitHub</phrase></textobject>
</mediaobject>
</informalfigure>
</listitem>
<listitem>
<simpara>To view the details for the pipeline&#8217;s staging and rollout, click <emphasis role="strong">Jenkinsfile</emphasis>.</simpara>
</listitem>
</orderedlist>
<simpara>For this example, view the details of the file and see the details for the rollout and staging.</simpara>
</section>
<section xml:id="view_pipelines_oso">
<title>Viewing the Pipeline&#8217;s Projects in OpenShift Online</title>
<simpara>To view the OpenShift Online projects that support your project&#8217;s pipeline, navigate to <link xl:href="https://console.starter-us-east-2.openshift.com/">https://console.starter-us-east-2.openshift.com/</link>. This page displays the following projects/namespaces that are created in OpenShift Online:</simpara>
<itemizedlist>
<listitem>
<simpara>The <emphasis role="strong">username</emphasis> project is where your pipelines run. This project&#8217;s name is your OpenShift Online user name.</simpara>
</listitem>
<listitem>
<simpara>The <emphasis role="strong">username-che</emphasis> project is for your Che Host and workspaces.</simpara>
</listitem>
<listitem>
<simpara>The <emphasis role="strong">username-jenkins</emphasis> project is used for your Jenkins Master or your Jenkins Slaves. Click <literal>Monitoring</literal> after clicking this project to access your Jenkins console.</simpara>
</listitem>
<listitem>
<simpara>The <emphasis role="strong">username-stage</emphasis> project is for your personal use. In this project, pods are displayed as pipelines that have been run. For maintenance, you can click this project and power down individual pods if required.</simpara>
</listitem>
<listitem>
<simpara>The <emphasis role="strong">username-run</emphasis> project is identical to the <emphasis role="strong">username-stage</emphasis> project and is used as an environment for experimenting with your OpenShift pods.</simpara>
</listitem>
</itemizedlist>
</section>
<section xml:id="approve_rollout">
<title>Approving the Build Pipeline</title>
<simpara>Several minutes after starting, your project&#8217;s build pipeline is ready to be promoted to <literal>Stage</literal>.</simpara>
<simpara>The build pipeline includes steps for a <literal>Stage</literal> build and a <literal>Run</literal> build. <literal>Stage</literal> is a production staging area to review and test changes before they are finalized and staged on <literal>Run</literal>.</simpara>
<simpara>To review the final changes in <literal>Stage</literal> and promote them to <literal>Run</literal>:</simpara>
<orderedlist numeration="arabic">
<listitem>
<simpara>From your Space&#8217;s dashboard, click <guibutton>Create</guibutton> from the options at the top of the screen.</simpara>
</listitem>
<listitem>
<simpara>From the displayed options, click <guibutton>Pipelines</guibutton>.</simpara>
</listitem>
<listitem>
<simpara>Click the icon next to the <literal>Rollout to Stage</literal> step in the displayed pipeline. OpenShift Online provides this public URL to access the staged Quickstart project.</simpara>
</listitem>
<listitem>
<simpara>Add a string to the text box and click <guibutton>Invoke</guibutton> to test the application.</simpara>
</listitem>
<listitem>
<simpara>Return to the OpenShift.io tab which displays the <literal>Pipeline</literal> view.</simpara>
</listitem>
<listitem>
<simpara>Click <guibutton>Input Required</guibutton> at the <literal>Approve</literal> stage of the pipeline.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/input_req.png"/>
</imageobject>
<textobject><phrase>Input Required</phrase></textobject>
</mediaobject>
</informalfigure>
</listitem>
<listitem>
<simpara>Click <guibutton>Promote</guibutton> to promote the build from the public URL for <emphasis role="strong">Stage</emphasis> to the public URL for the <emphasis role="strong">Run</emphasis> namespace. The rollout process from <emphasis role="strong">Stage</emphasis> to <emphasis role="strong">Run</emphasis> requires several minutes. You can view the detailed progress in the OpenShift Online console view.</simpara>
</listitem>
<listitem>
<simpara>When the <literal>Pipeline</literal> view indicates that the project is available in the <emphasis role="strong">Run</emphasis> namespace, click the icon next to <literal>Rollout to Run</literal> to view the project in a new tab.</simpara>
</listitem>
</orderedlist>
<simpara><emphasis role="strong">(Optional) Detailed Views</emphasis>:</simpara>
<itemizedlist>
<listitem>
<simpara>A detailed view for the <literal>Test</literal>, <literal>Stage</literal>, and <literal>Run</literal> environments is available in the <guibutton>Create</guibutton> &gt; <guibutton>Environments</guibutton> tab. Opt in for this <emphasis role="strong">experimental feature</emphasis> in your <literal>Profile</literal> page to view each environment&#8217;s deployments, pods, events, and other information.</simpara>
</listitem>
<listitem>
<simpara>A detailed view of your pipeline&#8217;s progress is available in your OpenShift Online account:</simpara>
<orderedlist numeration="loweralpha">
<listitem>
<simpara>Navigate to <link xl:href="https://manage.openshift.com/">https://manage.openshift.com/</link> in a new browser tab and log into your account.</simpara>
</listitem>
<listitem>
<simpara>Click <guibutton>OpenShift Console</guibutton> to view the console.</simpara>
</listitem>
<listitem>
<simpara>From the list of projects, click the <emphasis role="strong">username-jenkins</emphasis> option.</simpara>
</listitem>
<listitem>
<simpara>Click <literal>Builds</literal> and then <literal>Builds</literal> again in the menu options. Your project&#8217;s new build is listed here and you can use this console to monitor its progress.</simpara>
</listitem>
</orderedlist>
</listitem>
</itemizedlist>
</section>
<section xml:id="using_wi">
<title>Using Work Items</title>
<simpara>Create a Work Item that tracks changing a string in a Quickstart project. Use the <literal>Planner</literal> view to create a new Work Item for your Space as follows:</simpara>
<orderedlist numeration="arabic">
<listitem>
<simpara>Click your name on the top right side of the screen.</simpara>
</listitem>
<listitem>
<simpara>Click <guibutton>Profile</guibutton> in the displayed options.</simpara>
</listitem>
<listitem>
<simpara>Click <guibutton>Update Profile</guibutton>.</simpara>
</listitem>
<listitem>
<simpara>In the <literal>Experimental Features</literal> part of the page, read the disclaimer and check the <literal>I agree to the terms above and would like to opt into experimental features</literal> option and then click <guibutton>Update</guibutton> to use OpenShift.io&#8217;s experimental features.</simpara>
</listitem>
<listitem>
<simpara>Click your user name on the top left side of the page.</simpara>
</listitem>
<listitem>
<simpara>Click the name of your new Space from the displayed options to return to that Space&#8217;s dashboard view.</simpara>
</listitem>
<listitem>
<simpara>Click <guibutton>Plan</guibutton> to see the Planner view for your Space.  If experimental features have been enabled, the Planner view includes a green banner with the following message: <literal>This feature is experimental. You can manage experimental features on your profile page. Got it!</literal></simpara>
</listitem>
<listitem>
<simpara>Click <literal>Create Work Item</literal> at the bottom of the screen. This is the fastest option to create a new Work Item.</simpara>
</listitem>
</orderedlist>
</section>
<section xml:id="create_che_workspace-hello-world">
<title>Creating a Che Workspace</title>
<simpara>Create a new Che workspace for your project:</simpara>
<orderedlist numeration="arabic">
<listitem>
<simpara>In your OpenShift.io space&#8217;s dashboard, click <literal>Create</literal>.</simpara>
</listitem>
<listitem>
<simpara>In the <literal>Codebases</literal> view, click <literal>Create workspace</literal> for your project.</simpara>
</listitem>
<listitem>
<simpara>When your workspace is ready, click <guibutton>Open</guibutton> to view your new workspace.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/new_ws.png"/>
</imageobject>
<textobject><phrase>New Workspace</phrase></textobject>
</mediaobject>
</informalfigure>
</listitem>
</orderedlist>
<warning>
<simpara>If a new tab does not appear, do not click <literal>Create Workspace</literal> again because this creates an additional (unnecessary) workspace which wastes your OpenShift Online resources. The new tab does not appear if your browser blocks the pop up that creates this new workspace. To resolve this:</simpara>
<orderedlist numeration="arabic">
<listitem>
<simpara>Click the blocked pop up icon in your browser&#8217;s URL field.</simpara>
</listitem>
<listitem>
<simpara>Select the <literal>Always allow</literal> option for pop ups from OpenShift.io (see screen capture).</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/blocked_popup.png"/>
</imageobject>
<textobject><phrase>Blocked Pop Up</phrase></textobject>
</mediaobject>
</informalfigure>
</listitem>
<listitem>
<simpara>Click the new workspace URL in the same dialog box to display the new Che workspace in a new tab.</simpara>
</listitem>
</orderedlist>
</warning>
<simpara>When loaded and ready to use, the new Che workspace tab includes your new project&#8217;s GitHub repository folder in the <literal>Project Explorer</literal> panel.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/proj_gh.png"/>
</imageobject>
<textobject><phrase>Your GitHub Project in Che</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
<section xml:id="prereq_che-hello-world">
<title>Prerequisites for Using Your Che Workspace</title>
<simpara>Before using the Che workspace, ensure that the following prerequisites are met:</simpara>
<orderedlist numeration="arabic">
<listitem>
<simpara><emphasis role="strong">Finish loading the workspace</emphasis>: Before editing a project in a Che workspace, ensure that the workspace has finished loading. If the <literal>Project Explorer</literal> pane lists your project, the workspace has finished loading:</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/ws_loaded.png"/>
</imageobject>
<textobject><phrase>Workspace Loaded</phrase></textobject>
</mediaobject>
</informalfigure>
</listitem>
<listitem>
<simpara><emphasis role="strong">Ensure Git commands are available</emphasis>:</simpara>
<orderedlist numeration="loweralpha">
<listitem>
<simpara>Click <literal>Git</literal> in the workspace menu to ensure that all the listed commands (except <literal>Initialize Repository</literal>) are available.</simpara>
</listitem>
<listitem>
<simpara>If they are not available, reload the workspace tab. The following screen capture shows a successfully loaded workspace&#8217;s Git menu:</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/git_menu.png"/>
</imageobject>
<textobject><phrase>Git Menu Options</phrase></textobject>
</mediaobject>
</informalfigure>
</listitem>
</orderedlist>
</listitem>
<listitem>
<simpara><emphasis role="strong">Ensure your project is configured for Maven</emphasis>:</simpara>
<orderedlist numeration="loweralpha">
<listitem>
<simpara>Click your project name to select it.</simpara>
</listitem>
<listitem>
<simpara>Click the <literal>Project</literal> option from the menu options at the top of the page.</simpara>
</listitem>
<listitem>
<simpara>Select <literal>Update Project Configuration</literal>.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/config_maven.png"/>
</imageobject>
<textobject><phrase>Configure Maven</phrase></textobject>
</mediaobject>
</informalfigure>
</listitem>
<listitem>
<simpara>In the <literal>Project Configuration</literal> window, select <literal>Maven</literal> and click <guibutton>Save</guibutton>.</simpara>
</listitem>
<listitem>
<simpara>Click the <literal>run</literal> option from the Run button (<inlinemediaobject>
<imageobject>
<imagedata fileref="images/tri_run.png"/>
</imageobject>
<textobject><phrase>tri run</phrase></textobject>
</inlinemediaobject>). For Vert.x projects, this sets server and the hot deploy option.</simpara>
</listitem>
</orderedlist>
</listitem>
<listitem>
<simpara>A run terminal appears at the bottom pane of the Che workspace. When the <emphasis role="strong">mvn build</emphasis> finishes executing, the <literal>run</literal> view displays the following message:</simpara>
<screen>[INFO] INFO: Succeeded in deploying verticle</screen>
</listitem>
<listitem>
<simpara>Click the blue preview URL at the top of the <literal>run</literal> view to view your project.</simpara>
</listitem>
<listitem>
<simpara>Enter your name in the text box and click <guibutton>Invoke</guibutton> to test the application.</simpara>
</listitem>
</orderedlist>
<simpara>You are now viewing and interacting with a private sandbox for your project run in OpenShift Online. This is different from <literal>Stage</literal> and <literal>Run</literal>. See <link xl:href="pipelines.xml#pipelines">pipelines.xml</link> for details about <literal>Stage</literal> and <literal>Run</literal>. You can share this link with others to test your project in your sandbox environment.</simpara>
</section>
<section xml:id="change_code-hello-world">
<title>Changing the Quickstart&#8217;s Code</title>
<simpara>You can change your project&#8217;s code and preview the results as follows:</simpara>
<orderedlist numeration="arabic">
<listitem>
<simpara>In your Che workstation&#8217;s <literal>Project Explorer</literal> view, navigate to the following file: <literal>src</literal> &gt; <literal>main</literal> &gt; <literal>Java</literal> &gt; <literal>io.openshift.booster</literal> &gt; <literal>HttpApplication.java</literal>.</simpara>
</listitem>
<listitem>
<simpara>Find the following line in the file:</simpara>
<programlisting language="java" linenumbering="unnumbered">protected static final String template = "Hello, %s!";</programlisting>
</listitem>
<listitem>
<simpara>Change <emphasis role="strong">Hello</emphasis> to <emphasis role="strong">Bonjour</emphasis> in the line:</simpara>
<programlisting language="java" linenumbering="unnumbered">protected static final String template = "Bonjour, %s!";</programlisting>
</listitem>
<listitem>
<simpara>Save the changes using <keycombo><keycap>Ctrl</keycap><keycap>s</keycap></keycombo> (or <keycombo><keycap>Cmd</keycap><keycap>s</keycap></keycombo> for macOS).</simpara>
</listitem>
<listitem>
<simpara>Click the <literal>run</literal> option (<inlinemediaobject>
<imageobject>
<imagedata fileref="images/tri_run.png"/>
</imageobject>
<textobject><phrase>tri run</phrase></textobject>
</inlinemediaobject>). The following message displays when the run process is successfully completed:</simpara>
<screen>[INFO] INFO: Succeeded in deploying verticle</screen>
</listitem>
<listitem>
<simpara>Click the blue preview URL at the top of the <literal>run</literal> view to view your project.</simpara>
</listitem>
<listitem>
<simpara>Add a string to the text box and click <guibutton>Invoke</guibutton> to test the application.</simpara>
</listitem>
<listitem>
<simpara>In the GitHub repository page, click <literal>Commits</literal> to view all commits for your project and confirm that your recent changes are committed.</simpara>
</listitem>
<listitem>
<simpara>Return to the OpenShift.io pipeline view. Your project has a new pipeline build in progress, which includes your new commit. When required, click <literal>Input required</literal> and then click <guibutton>Promote</guibutton> to promote your build.</simpara>
</listitem>
</orderedlist>
</section>
<section xml:id="commit_sb-hello-world">
<title>Commit and Push Changes to GitHub</title>
<simpara>After making the required changes, commit and push the changes to your project&#8217;s GitHub repository:</simpara>
<important>
<simpara>Before committing your changes, ensure that your project&#8217;s pipeline build in OpenShift.io has successfully completed. See <xref linkend="approve_rollout"/> for instructions.</simpara>
</important>
<orderedlist numeration="arabic">
<listitem>
<simpara>Click <literal>Git</literal> from the menu options.</simpara>
</listitem>
<listitem>
<simpara>Select <literal>Commit</literal> from the displayed Git options.</simpara>
</listitem>
<listitem>
<simpara>In the commit dialog box:</simpara>
<orderedlist numeration="loweralpha">
<listitem>
<simpara>Ensure that all the changed and new files are selected.</simpara>
</listitem>
<listitem>
<simpara>Add a commit message describing your changes.</simpara>
</listitem>
<listitem>
<simpara>Click <guibutton>Commit</guibutton>.</simpara>
</listitem>
</orderedlist>
</listitem>
</orderedlist>
<simpara>Alternatively, you can push your commit to a remote repository:</simpara>
<orderedlist numeration="arabic">
<listitem>
<simpara>Click <literal>Git</literal> from the menu options.</simpara>
</listitem>
<listitem>
<simpara>Select <literal>Remote</literal> &gt; <literal>Push</literal> from the displayed Git options.</simpara>
</listitem>
<listitem>
<simpara>In the dialog box, select the appropriate remote repository.</simpara>
</listitem>
<listitem>
<simpara>Click <guibutton>Push</guibutton>.</simpara>
</listitem>
</orderedlist>
<simpara>A success message appears in the top right corner of the tab when a push is successful.</simpara>
</section>
<section xml:id="che_debug">
<title>Debugging Your Che Workspace</title>
<simpara>Return to your project&#8217;s Che workspace tab to learn to debug your project.</simpara>
<orderedlist numeration="arabic">
<listitem>
<simpara>In your <literal>HttpApplication.java</literal> file, add the following in a new line after line 22.</simpara>
<programlisting language="java" linenumbering="unnumbered">router.</programlisting>
</listitem>
<listitem>
<simpara>Use the <keycombo><keycap>Ctrl</keycap><keycap>Space</keycap></keycombo> shortcut to view the context-aware options for this line.</simpara>
</listitem>
<listitem>
<simpara>Select <literal>get():Route</literal> from the options. This uses the Vert.x Router&#8217;s Get method.</simpara>
</listitem>
<listitem>
<simpara>Edit the new line so that it includes the <emphasis role="strong">goodbye</emphasis> endpoint:</simpara>
<programlisting language="java" linenumbering="unnumbered">router.get("/api/goodbye").handler(this::goodbye);</programlisting>
</listitem>
<listitem>
<simpara>Add the following method for the <emphasis role="strong">goodbye</emphasis> endpoint in a new line after line 52:</simpara>
<programlisting language="java" linenumbering="unnumbered">private void goodbye(RoutingContext rc) {
    String name = rc.request().getParam("name");
    if (name == null) {
      name = "World";
    }
    JsonObject response = new JsonObject()
        .put("content", "Goodbye " + name);

    rc.response()
        .putHeader(CONTENT_TYPE, "application/run_debugjson; charset=utf-8")
        .end(response.encodePrettily());
  }</programlisting>
</listitem>
<listitem>
<simpara>Use <keycombo><keycap>Ctrl</keycap><keycap>s</keycap></keycombo> (or <keycombo><keycap>Cmd</keycap><keycap>s</keycap></keycombo> for macOS) to save your changes.</simpara>
</listitem>
<listitem>
<simpara>Click the <literal>run</literal> option (<inlinemediaobject>
<imageobject>
<imagedata fileref="images/tri_run.png"/>
</imageobject>
<textobject><phrase>tri run</phrase></textobject>
</inlinemediaobject>). The following message displays when the run process is successfully completed:</simpara>
<screen>[INFO] INFO: Succeeded in deploying verticle</screen>
</listitem>
<listitem>
<simpara>Click <literal>Terminal</literal> and enter the following command to test the new endpoint:</simpara>
<screen>curl localhost:8080/api/goodbye</screen>
<simpara>The following result appears if the changes were successful:</simpara>
<programlisting language="java" linenumbering="unnumbered">{
  "content" : "Goodbye World"
}</programlisting>
</listitem>
<listitem>
<simpara>In the <literal>EXEC</literal> bar on the top of the workspace page, click the stop button (a blue square icon) to stop the current run process.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/bar_stop.png"/>
</imageobject>
<textobject><phrase>EXEC Bar</phrase></textobject>
</mediaobject>
</informalfigure>
</listitem>
</orderedlist>
</section>
<section xml:id="setup_debugger">
<title>Set Up the Debugger</title>
<simpara>Use your Che workspace&#8217;s Debugger feature to debug your project&#8217;s code.</simpara>
<orderedlist numeration="arabic">
<listitem>
<simpara>Select the <literal>debug</literal> option in the Debug drop down menu:</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/debug_button.png"/>
</imageobject>
<textobject><phrase>Debugger Button</phrase></textobject>
</mediaobject>
</informalfigure>
</listitem>
<listitem>
<simpara>In the new <literal>debug</literal> tab, look for the following lines when the debugging starts:</simpara>
<informalexample>
<simpara>[INFO] The application will wait for a debugger to attach on debugPort 5005
[INFO] Launching Vert.x Application
[INFO] Listening for transport dt_socket at address: 5005</simpara>
</informalexample>
</listitem>
<listitem>
<simpara>When the debug process completes, click <literal>Run</literal> from the menu at the top of the page.</simpara>
</listitem>
<listitem>
<simpara>Select <literal>Edit Debug Configurations</literal>.</simpara>
</listitem>
<listitem>
<simpara>Click the <emphasis role="strong">+</emphasis> icon for the <literal>JAVA</literal> item in the dialog box.</simpara>
</listitem>
<listitem>
<simpara>Change the <literal>Port</literal> value to <emphasis role="strong">5050</emphasis>.</simpara>
</listitem>
<listitem>
<simpara>Click <guibutton>Save</guibutton> and then <guibutton>Close</guibutton>.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/debug_config.png"/>
</imageobject>
<textobject><phrase>Debugger Configuration Dialog</phrase></textobject>
</mediaobject>
</informalfigure>
</listitem>
<listitem>
<simpara>Create a new breakpoint for your method by clicking on the line number for the following line in your project&#8217;s code:</simpara>
<programlisting language="java" linenumbering="unnumbered">    if (name == null) {</programlisting>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/breakpoint.png"/>
</imageobject>
<textobject><phrase>Create Breakpoint</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>Click the <literal>Debug</literal> view&#8217;s <literal>Breakpoints</literal> addition to confirm the new breakpoint is added.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/breakpoint_view.png"/>
</imageobject>
<textobject><phrase>Breakpoint View</phrase></textobject>
</mediaobject>
</informalfigure>
</listitem>
</orderedlist>
<simpara>The Debugger is now set up for your project.</simpara>
</section>
<section xml:id="run_debug">
<title>Run the Debug Command</title>
<simpara>After setting up the Debugger, use the Debug command for your project:</simpara>
<orderedlist numeration="arabic">
<listitem>
<simpara>Click <literal>Run</literal> from the menu options.</simpara>
</listitem>
<listitem>
<simpara>Select the <literal>Debug</literal> option and then the <literal>Remote Java</literal> option.</simpara>
</listitem>
<listitem>
<simpara>A message appears when the Remote debugger successfully connects.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/success_remote.png"/>
</imageobject>
<textobject><phrase>Successful Connection to Remote Debugger</phrase></textobject>
</mediaobject>
</informalfigure>
<note>
<simpara>If your Remote Debugger connection fails, restart your Chrome browser and use a new Incognito tab to try again.</simpara>
</note>
</listitem>
<listitem>
<simpara>Click <literal>Terminal</literal> to view the terminal tab.</simpara>
</listitem>
<listitem>
<simpara>Run the following command to start debugging:</simpara>
</listitem>
</orderedlist>
<screen>curl localhost:8080/api/goodbye</screen>
<simpara>You can now review variables in the <literal>Debug</literal> tab. You can also use the <literal>Resume</literal>, <literal>Step Into</literal>, <literal>Step Over</literal>, and <literal>Step Out</literal> option during the debugging process.</simpara>
</section>
<section xml:id="opt_mem">
<title>Reduce the Hello World Project&#8217;s Memory Usage</title>
<simpara>You can optimize your new quickstart to use less memory. This is particularly important when using OpenShift Online&#8217;s Free Tier because it includes limited memory.</simpara>
<orderedlist numeration="arabic">
<listitem>
<simpara>In the Che workspace, expand the <literal>src</literal> &#62; <literal>main</literal> &#62; <literal>fabric8</literal> folders for your project.</simpara>
</listitem>
<listitem>
<simpara>Right-click the <literal>fabric8</literal> folder icon and select <literal>New</literal> &#62; <literal>File</literal>.</simpara>
</listitem>
<listitem>
<simpara>Name the new file <emphasis role="strong">deployment.yml</emphasis> and click <guibutton>OK</guibutton>. The new file displays in the editor.</simpara>
</listitem>
<listitem>
<simpara>Copy the contents of the following file to your new yaml file: <link xl:href="https://raw.githubusercontent.com/burrsutter/vertx-eventbus/master/src/main/fabric8/deployment.yml">deployment.yaml</link>.</simpara>
<note>
<simpara>Spaces are meaningful in yaml files. Ensure that the correct spacing is copied into your yaml file from the link.</simpara>
</note>
</listitem>
<listitem>
<simpara>Use <keycombo><keycap>Ctrl</keycap><keycap>s</keycap></keycombo> (or <keycombo><keycap>Cmd</keycap><keycap>s</keycap></keycombo> for macOS) to save your changes.</simpara>
</listitem>
<listitem>
<simpara>Click <literal>Git</literal> in the menu on top of the page and then select <literal>Commit</literal>.</simpara>
</listitem>
<listitem>
<simpara>In the dialog box:</simpara>
<orderedlist numeration="loweralpha">
<listitem>
<simpara>Ensure that both the changed files are selected to be included in the commit.</simpara>
</listitem>
<listitem>
<simpara>Add a commit message.</simpara>
</listitem>
<listitem>
<simpara>Select the <literal>Push committed changes to origin/master</literal> option.</simpara>
</listitem>
<listitem>
<simpara>Click <guibutton>Commit</guibutton>..</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/mem_commit.png"/>
</imageobject>
<textobject><phrase>Commit Changes</phrase></textobject>
</mediaobject>
</informalfigure>
</listitem>
</orderedlist>
</listitem>
</orderedlist>
<simpara>Monitor your OpenShift Online account&#8217;s quota usage using the OpenShift CLI (oc) tool:</simpara>
<orderedlist numeration="arabic">
<listitem>
<simpara>Navigate to <link xl:href="https://console.starter-us-east-2.openshift.com/console/">https://console.starter-us-east-2.openshift.com/console/</link> in your browser.</simpara>
</listitem>
<listitem>
<simpara>In the OpenShift Console, click the <emphasis role="strong">?</emphasis> icon next to your user name.</simpara>
</listitem>
<listitem>
<simpara>From the menu options, click <literal>Command Line Tools</literal>.</simpara>
</listitem>
<listitem>
<simpara>Use the download links from the <literal>Command Line Tools</literal> page for your operating system and install oc tools.</simpara>
</listitem>
<listitem>
<simpara>In your computer&#8217;s terminal (not the <literal>Terminal</literal> tab for your workspace), run the following command:</simpara>
<programlisting language="cli" linenumbering="unnumbered">oc login https://console.starter-us-east-2.openshift.com/</programlisting>
</listitem>
<listitem>
<simpara>Use the following command during and after the new pod is used in OpenShift to monitor and compare resource usage:</simpara>
<programlisting language="cli" linenumbering="unnumbered">oc get quota compute-resources -o yaml -n &lt;username&gt;-stage</programlisting>
<simpara>An example of the output for this command is as follows:</simpara>
<programlisting language="cli" linenumbering="unnumbered">status:
  hard:
    limits.cpu: "2"
    limits.memory: 1Gi
  used:
    limits.cpu: "1"
    limits.memory: 512Mi</programlisting>
</listitem>
<listitem>
<simpara>Committing and pushing your new yaml file triggers a new pipeline build for your OpenShift.io project. When the pipeline build is rolled out to Stage, execute the following command again to see the change in memory usage:</simpara>
<programlisting language="cli" linenumbering="unnumbered">oc get quota compute-resources -o yaml -n &lt;username&gt;-stage</programlisting>
<simpara>An example of the output for this command after committing the yaml file is as follows:</simpara>
<programlisting language="cli" linenumbering="unnumbered">status:
  hard:
    limits.cpu: "2"
    limits.memory: 1Gi
  used:
    limits.cpu: 488m
    limits.memory: 250Mi</programlisting>
</listitem>
</orderedlist>
<simpara>Optimizing memory usage is particularly important when creating more than one project in OpenShift.io. Each additional project requires an additional share of your OpenShift Online resources. For OpenShift Online&#8217;s Free Tier, see <xref linkend="cleanup_sb.adoc##cleanup_sb"/> to reset your OpenShift Online and OpenShift.io accounts after creating two projects.</simpara>
</section>
</chapter>
<chapter xml:id="spring-boot-quickstart-tutorial">
<title>Spring Boot Quickstart Tutorial</title>
<section xml:id="create_springboot">
<title>Creating a Spring Boot Quickstart Project</title>
<orderedlist numeration="arabic">
<listitem>
<simpara>In your OpenShift.io home page, double-click your new space.</simpara>
</listitem>
<listitem>
<simpara>In your space&#8217;s dashboard, click <guibutton>Add to space</guibutton>.</simpara>
</listitem>
<listitem>
<simpara>Select <literal>Create a new Quickstart project</literal>.</simpara>
</listitem>
<listitem>
<simpara>In the new project menu:</simpara>
<orderedlist numeration="loweralpha">
<listitem>
<simpara>Select <literal>Spring Boot - Basic</literal> from the <literal>Technology Stack</literal> options.</simpara>
</listitem>
<listitem>
<simpara>Add the name <emphasis role="strong">myspringboot</emphasis> to the <literal>Name</literal> field.</simpara>
</listitem>
<listitem>
<simpara>Click <guibutton>Finish</guibutton>. See <link xl:href="hw_dev.xml#hw_dev">hw_dev.xml</link> for instructions for the remaining steps in this wizard. However, for this tutorial, use the default values or click <guibutton>Finish</guibutton> to skip these steps.</simpara>
</listitem>
</orderedlist>
</listitem>
<listitem>
<simpara>When the project is created, click <guibutton>Ok</guibutton> to continue.</simpara>
</listitem>
</orderedlist>
</section>
<section xml:id="stop_ws">
<title>Stopping Existing Workspaces</title>
<simpara>Before creating a workspace for your project, ensure that the workspace for your previous project is stopped. Each running workspace uses your OpenShift Online resources. As a result, older workspaces must be stopped before creating new workspaces.</simpara>
<simpara>Review the workspace in your OpenShift Online account as follows:</simpara>
<orderedlist numeration="arabic">
<listitem>
<simpara>In your Space&#8217;s dashboard, click <guibutton>Create</guibutton>.</simpara>
</listitem>
<listitem>
<simpara>In the <literal>Codebases</literal> view, click <guibutton>Open</guibutton> for the older project&#8217;s workspace. Allow several minutes for the project to load.</simpara>
</listitem>
<listitem>
<simpara>Stop the current workspace in one of two ways:</simpara>
<orderedlist numeration="loweralpha">
<listitem>
<simpara>Click the <literal>Workspace</literal> and select <literal>Stop</literal> from the options.</simpara>
</listitem>
<listitem>
<simpara>Alternatively, within the target workspace:</simpara>
<orderedlist numeration="lowerroman">
<listitem>
<simpara>Click <emphasis role="strong">&gt;</emphasis> next to the <literal>Workspace</literal> menu item on the left side of the workspace.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/che_dash.png"/>
</imageobject>
<textobject><phrase>Che Dashboard Link From Within a Workspace</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>From the displayed list of all previously created workspaces, a green dot next to the name indicates if a workspace is not stopped.</simpara>
</listitem>
<listitem>
<simpara>For a running space, click the stop icon under <literal>ACTIONS</literal>.</simpara>
</listitem>
</orderedlist>
</listitem>
</orderedlist>
</listitem>
</orderedlist>
<simpara>Your old workspace&#8217;s resources are now reclaimed in your OpenShift Online account.</simpara>
</section>
<section xml:id="che_ws_sb">
<title>Creating a Workspace for the Spring Boot Project</title>
<simpara>Ensure that any running workspaces are stopped, then create a new workspace:</simpara>
<orderedlist numeration="arabic">
<listitem>
<simpara>Return to the space dashboard in OpenShift.io.</simpara>
</listitem>
<listitem>
<simpara>Click <literal>Create</literal> to view the <literal>Codebases</literal> page.</simpara>
</listitem>
<listitem>
<simpara>Click <literal>Create workspace</literal> for your Spring Boot project. Ensure that pop ups are allowed and the new workspace launches automatically in a new tab.</simpara>
<warning>
<simpara>If a new tab does not appear, do not click <literal>Create Workspace</literal> again because this creates an additional (unnecessary) workspace and wastes your OpenShift Online resources. The new tab does not display if your browser has blocked the pop up that creates this new workspace. To resolve this:</simpara>
<orderedlist numeration="arabic">
<listitem>
<simpara>Click the blocked pop up icon in your browser&#8217;s URL field.</simpara>
</listitem>
<listitem>
<simpara>Select the <literal>Always allow</literal> option for pop ups from OpenShift.io (see screen capture).</simpara>
</listitem>
<listitem>
<simpara>Click the new workspace URL in the same dialog box to display the new Che workspace in a new tab.</simpara>
</listitem>
</orderedlist>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/blocked_popup.png"/>
</imageobject>
<textobject><phrase>Blocked Pop Up</phrase></textobject>
</mediaobject>
</informalfigure>
</warning>
</listitem>
<listitem>
<simpara>When the workspace is ready, click <guibutton>Open</guibutton> to view the new workspace.</simpara>
</listitem>
<listitem>
<simpara>In your new workspace, click the <literal>Terminal</literal> tab and run the following command:</simpara>
<programlisting language="cli" linenumbering="unnumbered">cd myspringboot
mvn test</programlisting>
<simpara>When the maven test succeeds, the <literal>BUILD SUCCESS</literal> message appears in the terminal view. You can only commit and push changes to your GitHub repository after the maven test succeeds.</simpara>
</listitem>
<listitem>
<simpara>In the <literal>Project Explorer</literal> view, double-click the <literal>src</literal> &gt; <literal>main</literal> &gt; <literal>java</literal> &gt; <literal>io.openshift.booster</literal> &gt; <literal>service</literal> folders.</simpara>
</listitem>
<listitem>
<simpara>Double-click the <literal>GreetingController.java</literal> file to view it in the editor.</simpara>
</listitem>
<listitem>
<simpara>Add a line break at line 38, then type <emphasis role="strong">@</emphasis> and then use <keycombo><keycap>Ctrl</keycap><keycap>Space</keycap></keycombo> to view a list of context-sensitive options.</simpara>
</listitem>
<listitem>
<simpara>From the list, select <literal>RequestMapping</literal>.</simpara>
</listitem>
<listitem>
<simpara>Edit the code to include the following code:</simpara>
<programlisting language="java" linenumbering="unnumbered">@RequestMapping("/api/goodbye")
public String goodbye(@RequestParam(value="name", defaultValue="World") String name) {
      return "Goodbye " + name + " " +  new java.util.Date();
}</programlisting>
<simpara>The added code appears as follows:</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/bs_code_add.png"/>
</imageobject>
<textobject><phrase>Code Added to Boot Spring Project</phrase></textobject>
</mediaobject>
</informalfigure>
</listitem>
<listitem>
<simpara>Save your changes using <keycombo><keycap>Ctrl</keycap><keycap>s</keycap></keycombo> (or <keycombo><keycap>Cmd</keycap><keycap>s</keycap></keycombo> for macOS).
.</simpara>
</listitem>
<listitem>
<simpara>Click the <literal>run</literal> option (<inlinemediaobject>
<imageobject>
<imagedata fileref="images/tri_run.png"/>
</imageobject>
<textobject><phrase>tri run</phrase></textobject>
</inlinemediaobject>). This sets up the Spring Boot server. Unlike the Vert.x Quickstart project, the hot deploy option is not available for Spring Boot projects.</simpara>
</listitem>
<listitem>
<simpara>In the <literal>run</literal> terminal, the <emphasis role="strong">mvn build</emphasis> command runs and downloads the required dependencies. When complete, the <literal>run</literal> view displays the following message:</simpara>
<screen>[INFO] INFO: Succeeded in deploying verticle</screen>
</listitem>
<listitem>
<simpara>Click the blue preview URL at the top of the <literal>run</literal> view to view your project.</simpara>
</listitem>
<listitem>
<simpara>Append the following string to the preview URL in your browser:</simpara>
<programlisting language="url" linenumbering="unnumbered">/api/goodbye?name=Samwell%20Gamgee</programlisting>
</listitem>
<listitem>
<simpara>If successful, the amended preview URL displays the following:</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/samwise_result.png"/>
</imageobject>
<textobject><phrase>Preview URL Result</phrase></textobject>
</mediaobject>
</informalfigure>
</listitem>
</orderedlist>
</section>
<section xml:id="reduce_mem">
<title>Reduce the Boot Spring Project&#8217;s Memory Usage</title>
<simpara>Your OpenShift.io space now has two quickstart projects running: the Hello World Vert.x project and the new Spring Boot project. Both projects use the same limited memory resources in OpenShift Online. As a result, you must reduce the memory usage for both projects.</simpara>
<simpara>See <link xl:href="opt_mem.xml#opt_mem">opt_mem.xml</link> to optimize memory usage for the Hello World project and use the following instructions for the Spring Boot project:</simpara>
<orderedlist numeration="arabic">
<listitem>
<simpara>In your Che workspace, expand the <literal>src</literal> &gt; <literal>main</literal> &gt; <literal>fabric8</literal> folders.</simpara>
</listitem>
<listitem>
<simpara>Right-click the <literal>fabric8</literal> folder and select <literal>New</literal> &gt; <literal>File</literal>.</simpara>
</listitem>
<listitem>
<simpara>Name the new file <emphasis role="strong">deployment.yaml</emphasis>.</simpara>
</listitem>
<listitem>
<simpara>Copy the following to your new yaml file: <link xl:href="https://raw.githubusercontent.com/burrsutter/vertx-eventbus/master/src/main/fabric8/deployment.yml">deployment.yaml</link>.</simpara>
<note>
<simpara>Spaces are meaningful in yaml files. Ensure that the correct spacing is copied into your yaml file from the link.</simpara>
</note>
</listitem>
<listitem>
<simpara>Use <keycombo><keycap>Ctrl</keycap><keycap>s</keycap></keycombo> (or <keycombo><keycap>Cmd</keycap><keycap>s</keycap></keycombo> for macOS) to save your changes.</simpara>
</listitem>
</orderedlist>
</section>
<section xml:id="commit_sb-spring-boot">
<title>Commit and Push Changes to GitHub</title>
<simpara>After making the required changes, commit and push the changes to your project&#8217;s GitHub repository:</simpara>
<important>
<simpara>Before committing your changes, ensure that your project&#8217;s pipeline build in OpenShift.io has successfully completed. See <xref linkend="approve_rollout"/> for instructions.</simpara>
</important>
<orderedlist numeration="arabic">
<listitem>
<simpara>Click <literal>Git</literal> from the menu options.</simpara>
</listitem>
<listitem>
<simpara>Select <literal>Commit</literal> from the displayed Git options.</simpara>
</listitem>
<listitem>
<simpara>In the commit dialog box:</simpara>
<orderedlist numeration="loweralpha">
<listitem>
<simpara>Ensure that all the changed and new files are selected.</simpara>
</listitem>
<listitem>
<simpara>Add a commit message describing your changes.</simpara>
</listitem>
<listitem>
<simpara>Click <guibutton>Commit</guibutton>.</simpara>
</listitem>
</orderedlist>
</listitem>
</orderedlist>
<simpara>Alternatively, you can push your commit to a remote repository:</simpara>
<orderedlist numeration="arabic">
<listitem>
<simpara>Click <literal>Git</literal> from the menu options.</simpara>
</listitem>
<listitem>
<simpara>Select <literal>Remote</literal> &gt; <literal>Push</literal> from the displayed Git options.</simpara>
</listitem>
<listitem>
<simpara>In the dialog box, select the appropriate remote repository.</simpara>
</listitem>
<listitem>
<simpara>Click <guibutton>Push</guibutton>.</simpara>
</listitem>
</orderedlist>
<simpara>A success message appears in the top right corner of the tab when a push is successful.</simpara>
</section>
<section xml:id="cleanup_sb">
<title>Clearing Up Your OpenShift Online Account</title>
<simpara>OpenShift.io generates artifacts within five projects (Kubernetes namespaces) in OpenShift Online. These artifacts use a significant amount of the limited resources available with OpenShift Online&#8217;s Free Tier. Reset your OpenShift.io and Openshift Online account resources as follows:</simpara>
<orderedlist numeration="arabic">
<listitem>
<simpara><emphasis role="strong">Delete your OpenShift.io spaces</emphasis>:</simpara>
<orderedlist numeration="loweralpha">
<listitem>
<simpara>In the OpenShift.io home page, click your name in the top right part of the page.</simpara>
</listitem>
<listitem>
<simpara>Click <guibutton>Profile</guibutton> from the displayed options.</simpara>
</listitem>
<listitem>
<simpara>In the <literal>Profile</literal> page, click <literal>Spaces</literal>.</simpara>
</listitem>
<listitem>
<simpara>Click <guibutton>Delete</guibutton> and then <guibutton>Remove</guibutton> for each of the listed spaces.</simpara>
<note>
<simpara>Deleting the spaces does not remove the GitHub repositories created for each of these spaces.</simpara>
</note>
</listitem>
</orderedlist>
</listitem>
<listitem>
<simpara><emphasis role="strong">Reset your OpenShift.io environment</emphasis>:</simpara>
<orderedlist numeration="loweralpha">
<listitem>
<simpara>In your <literal>Profile</literal> page, click <guibutton>Update Profile</guibutton>.</simpara>
</listitem>
<listitem>
<simpara>Click <guibutton>Reset Environment</guibutton>. A warning page appears with a summary of your OpenShift.io account.</simpara>
</listitem>
<listitem>
<simpara>Click <guibutton>Erase my OpenShift.io Environment</guibutton>.</simpara>
</listitem>
<listitem>
<simpara>In the dialog box, add your OpenShift.io user name and click <guibutton>I understand my actions - erase my environment</guibutton>.</simpara>
</listitem>
<listitem>
<simpara>After the environment is successfully erased, click the check mark icon in the top right side of the page to see the <literal>Jenkins</literal> and <literal>Che</literal> status.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/status_success.png"/>
</imageobject>
<textobject><phrase>Che and Jenkins Successfully Restored</phrase></textobject>
</mediaobject>
</informalfigure>
</listitem>
</orderedlist>
</listitem>
</orderedlist>
<simpara>After successfully completing these steps, your OpenShift.io and OpenShift Online account resources are reset and ready for use with a new project.</simpara>
</section>
</chapter>
<chapter xml:id="importing-an-existing-project-from-github">
<title>Importing an Existing Project from GitHub</title>
<simpara>As an alternative to creating a new quickstart project, you can add an existing project in GitHub to OpenShift.io as follows:</simpara>
<section xml:id="fork_repo">
<title>Forking a Repository</title>
<simpara>For this tutorial, fork for one of the following example repositories:</simpara>
<itemizedlist>
<listitem>
<simpara><link xl:href="https://github.com/burrsutter/vertx-eventbus">https://github.com/burrsutter/vertx-eventbus</link></simpara>
</listitem>
<listitem>
<simpara><link xl:href="https://github.com/burrsutter/vertx-paint">https://github.com/burrsutter/vertx-paint</link></simpara>
</listitem>
<listitem>
<simpara><link xl:href="https://github.com/burrsutter/vertx-wiki2">https://github.com/burrsutter/vertx-wiki2</link></simpara>
</listitem>
</itemizedlist>
<note>
<simpara>OpenShift Online&#8217;s Free Tier only includes two pods and each project uses one pod. WHile you can import all these projects into OpenShift.io, but importing all three simultaneously causes delays of 12-15 minutes in the import processes.</simpara>
</note>
</section>
<section xml:id="imp_project">
<title>Creating a Space and Import Your Project</title>
<orderedlist numeration="arabic">
<listitem>
<simpara>In OpenShift.io, click the <emphasis role="strong">+</emphasis> icon in the spaces view to create a new space and name it <emphasis role="strong">myspace</emphasis>.</simpara>
</listitem>
<listitem>
<simpara>After the space is created, click <literal>Import existing code</literal> in the welcome dialog.</simpara>
</listitem>
<listitem>
<simpara>Select an <literal>Organization</literal> from the drop down options. The default (and recommended for this tutorial) option is your personal github account&#8217;s name.</simpara>
</listitem>
<listitem>
<simpara>Click <guibutton>Next</guibutton>.</simpara>
</listitem>
<listitem>
<simpara>Select the forked <literal>vertx-eventbus</literal> repository from the options listed and click <guibutton>Finish</guibutton>.</simpara>
</listitem>
<listitem>
<simpara>Click <guibutton>OK</guibutton> at the success screen.</simpara>
</listitem>
</orderedlist>
</section>
<section xml:id="create_che_workspace-import-code">
<title>Creating a Che Workspace</title>
<simpara>Create a new Che workspace for your project:</simpara>
<orderedlist numeration="arabic">
<listitem>
<simpara>In your OpenShift.io space&#8217;s dashboard, click <literal>Create</literal>.</simpara>
</listitem>
<listitem>
<simpara>In the <literal>Codebases</literal> view, click <literal>Create workspace</literal> for your project.</simpara>
</listitem>
<listitem>
<simpara>When your workspace is ready, click <guibutton>Open</guibutton> to view your new workspace.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/new_ws.png"/>
</imageobject>
<textobject><phrase>New Workspace</phrase></textobject>
</mediaobject>
</informalfigure>
</listitem>
</orderedlist>
<warning>
<simpara>If a new tab does not appear, do not click <literal>Create Workspace</literal> again because this creates an additional (unnecessary) workspace which wastes your OpenShift Online resources. The new tab does not appear if your browser blocks the pop up that creates this new workspace. To resolve this:</simpara>
<orderedlist numeration="arabic">
<listitem>
<simpara>Click the blocked pop up icon in your browser&#8217;s URL field.</simpara>
</listitem>
<listitem>
<simpara>Select the <literal>Always allow</literal> option for pop ups from OpenShift.io (see screen capture).</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/blocked_popup.png"/>
</imageobject>
<textobject><phrase>Blocked Pop Up</phrase></textobject>
</mediaobject>
</informalfigure>
</listitem>
<listitem>
<simpara>Click the new workspace URL in the same dialog box to display the new Che workspace in a new tab.</simpara>
</listitem>
</orderedlist>
</warning>
<simpara>When loaded and ready to use, the new Che workspace tab includes your new project&#8217;s GitHub repository folder in the <literal>Project Explorer</literal> panel.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/proj_gh.png"/>
</imageobject>
<textobject><phrase>Your GitHub Project in Che</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
<section xml:id="prereq_che-import-code">
<title>Prerequisites for Using Your Che Workspace</title>
<simpara>Before using the Che workspace, ensure that the following prerequisites are met:</simpara>
<orderedlist numeration="arabic">
<listitem>
<simpara><emphasis role="strong">Finish loading the workspace</emphasis>: Before editing a project in a Che workspace, ensure that the workspace has finished loading. If the <literal>Project Explorer</literal> pane lists your project, the workspace has finished loading:</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/ws_loaded.png"/>
</imageobject>
<textobject><phrase>Workspace Loaded</phrase></textobject>
</mediaobject>
</informalfigure>
</listitem>
<listitem>
<simpara><emphasis role="strong">Ensure Git commands are available</emphasis>:</simpara>
<orderedlist numeration="loweralpha">
<listitem>
<simpara>Click <literal>Git</literal> in the workspace menu to ensure that all the listed commands (except <literal>Initialize Repository</literal>) are available.</simpara>
</listitem>
<listitem>
<simpara>If they are not available, reload the workspace tab. The following screen capture shows a successfully loaded workspace&#8217;s Git menu:</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/git_menu.png"/>
</imageobject>
<textobject><phrase>Git Menu Options</phrase></textobject>
</mediaobject>
</informalfigure>
</listitem>
</orderedlist>
</listitem>
<listitem>
<simpara><emphasis role="strong">Ensure your project is configured for Maven</emphasis>:</simpara>
<orderedlist numeration="loweralpha">
<listitem>
<simpara>Click your project name to select it.</simpara>
</listitem>
<listitem>
<simpara>Click the <literal>Project</literal> option from the menu options at the top of the page.</simpara>
</listitem>
<listitem>
<simpara>Select <literal>Update Project Configuration</literal>.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/config_maven.png"/>
</imageobject>
<textobject><phrase>Configure Maven</phrase></textobject>
</mediaobject>
</informalfigure>
</listitem>
<listitem>
<simpara>In the <literal>Project Configuration</literal> window, select <literal>Maven</literal> and click <guibutton>Save</guibutton>.</simpara>
</listitem>
<listitem>
<simpara>Click the <literal>run</literal> option from the Run button (<inlinemediaobject>
<imageobject>
<imagedata fileref="images/tri_run.png"/>
</imageobject>
<textobject><phrase>tri run</phrase></textobject>
</inlinemediaobject>). For Vert.x projects, this sets server and the hot deploy option.</simpara>
</listitem>
</orderedlist>
</listitem>
<listitem>
<simpara>A run terminal appears at the bottom pane of the Che workspace. When the <emphasis role="strong">mvn build</emphasis> finishes executing, the <literal>run</literal> view displays the following message:</simpara>
<screen>[INFO] INFO: Succeeded in deploying verticle</screen>
</listitem>
<listitem>
<simpara>Click the blue preview URL at the top of the <literal>run</literal> view to view your project.</simpara>
</listitem>
<listitem>
<simpara>Enter your name in the text box and click <guibutton>Invoke</guibutton> to test the application.</simpara>
</listitem>
</orderedlist>
<simpara>You are now viewing and interacting with a private sandbox for your project run in OpenShift Online. This is different from <literal>Stage</literal> and <literal>Run</literal>. See <link xl:href="pipelines.xml#pipelines">pipelines.xml</link> for details about <literal>Stage</literal> and <literal>Run</literal>. You can share this link with others to test your project in your sandbox environment.</simpara>
<orderedlist numeration="arabic">
<listitem>
<simpara><xref linkend="changing_code"/></simpara>
</listitem>
</orderedlist>
</section>
<section xml:id="changing_code">
<title>Changing the Quickstart&#8217;s Code</title>
<simpara>You can change your project&#8217;s code and preview the results as follows:</simpara>
<orderedlist numeration="arabic">
<listitem>
<simpara>In the <literal>Project Explorer</literal> view, double-click the following directories to expand them: <literal>src</literal> &gt; <literal>main</literal> &gt; <literal>Java</literal> &gt; <literal>io.openshift.booster</literal>.</simpara>
</listitem>
<listitem>
<simpara>In your project&#8217;s <literal>HttpApplication.java</literal> file, find the following line:</simpara>
<programlisting language="java" linenumbering="unnumbered">  protected static final String template = "Aloha !!, %s!";</programlisting>
</listitem>
<listitem>
<simpara>Add more exclamation marks. The line should now be:</simpara>
<programlisting language="java" linenumbering="unnumbered">  protected static final String template = "Aloha !!!!!, %s!";</programlisting>
<note>
<simpara>The code includes a new route for <emphasis role="strong">eventbus</emphasis> and its supporting method. These set up <emphasis role="strong">eventbus</emphasis> to allow outbound-only communications for the <emphasis role="strong">my-feed</emphasis> channel.  Any messages arriving in the <emphasis role="strong">my-feed</emphasis> channel are pushed to the browser using this SockJS bridge. This project includes a <literal>vertx-eventbus.js</literal> file along with the <literal>index.html</literal> file and also includes tweaks to the <literal>index.html</literal>.</simpara>
</note>
</listitem>
<listitem>
<simpara>Save the changes (<keycombo><keycap>Ctrl</keycap><keycap>s</keycap></keycombo> or <keycombo><keycap>Cmd</keycap><keycap>s</keycap></keycombo> for macOS).</simpara>
</listitem>
<listitem>
<simpara>Click the <literal>run</literal> option from the Run button (<inlinemediaobject>
<imageobject>
<imagedata fileref="images/tri_run.png"/>
</imageobject>
<textobject><phrase>tri run</phrase></textobject>
</inlinemediaobject>). The following message appears when the run process completes:</simpara>
<screen>[INFO] INFO: Succeeded in deploying verticle</screen>
</listitem>
<listitem>
<simpara>Click the blue preview URL at the top of the <literal>run</literal> view to view your project.</simpara>
</listitem>
<listitem>
<simpara>Enter your name in the text box and click <guibutton>Invoke</guibutton> to test the application.</simpara>
</listitem>
</orderedlist>
</section>
<section xml:id="commit">
<title>Commit Your Changes</title>
<important>
<simpara>Before attempting to commit your changes, ensure that your project&#8217;s pipeline build in OpenShift.io has successfully completed. If this is at the approval stage, click <guibutton>Promote</guibutton> to promote the build from <literal>Stage</literal> to <literal>Run</literal>. When complete, the pipeline build in OpenShift.io appears as follows:</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/pipeline_success.png"/>
</imageobject>
<textobject><phrase>Successful Pipeline Build</phrase></textobject>
</mediaobject>
</informalfigure>
</important>
<orderedlist numeration="arabic">
<listitem>
<simpara>In your project&#8217;s Che workspace, click <literal>Git</literal> from the options at the top of the screen.</simpara>
</listitem>
<listitem>
<simpara>Click <literal>Commit</literal> from the Git options.</simpara>
</listitem>
<listitem>
<simpara>In the <literal>Commit to repository</literal> dialog:</simpara>
<orderedlist numeration="loweralpha">
<listitem>
<simpara>Ensure that all changed files are selected.</simpara>
</listitem>
<listitem>
<simpara>Add a commit message. For this example, use <emphasis role="strong">Changed greeting to Bonjour</emphasis>.</simpara>
</listitem>
<listitem>
<simpara>Select the <literal>Push commit changes to: origin/master</literal> option.</simpara>
</listitem>
<listitem>
<simpara>Click <guibutton>Commit</guibutton>.</simpara>
<simpara><inlinemediaobject>
<imageobject>
<imagedata fileref="images/commit_dialog.png"/>
</imageobject>
<textobject><phrase>Commit Dialog</phrase></textobject>
</inlinemediaobject></simpara>
<simpara>When successful, a message appears to confirm the push to the GitHub repository.</simpara>
</listitem>
</orderedlist>
</listitem>
<listitem>
<simpara>Alternatively, you can push your commit to a remote repository:</simpara>
<orderedlist numeration="loweralpha">
<listitem>
<simpara>Click <literal>Git</literal> from the menu.</simpara>
</listitem>
<listitem>
<simpara>From the Git options, select <literal>Remote</literal> and then <literal>Push</literal>.</simpara>
</listitem>
<listitem>
<simpara>In the dialog box, select the appropriate remote repository and then click <guibutton>Push</guibutton>. A message appears when the push is successful.</simpara>
</listitem>
</orderedlist>
</listitem>
<listitem>
<simpara>After pushing your changes, navigate to your project&#8217;s GitHub repository to view changes.</simpara>
<informalexample>
<note>
<simpara>If needed, find the link for your project&#8217;s GitHub repository as follows:</simpara>
</note>
<orderedlist numeration="arabic">
<listitem>
<simpara>Return to the OpenShift.io tab in your browser.</simpara>
</listitem>
<listitem>
<simpara>Click <literal>Create</literal> and then the <literal>Codebases</literal> option.</simpara>
</listitem>
<listitem>
<simpara>From the list of codebases for your space, click the name of your current project. The GitHub repository for the project appears in a new tab.</simpara>
</listitem>
</orderedlist>
</informalexample>
</listitem>
<listitem>
<simpara>In the GitHub repository page, click <literal>Commits</literal> to view all commits for your project and confirm that your recent changes are committed.</simpara>
</listitem>
<listitem>
<simpara>Return to the OpenShift.io pipeline view. Your project has a new pipeline build in progress, which includes your new commit. When required, click <literal>Input required</literal> and then click <guibutton>Promote</guibutton> to promote your build. You can also monitor the build&#8217;s progress in your OpenShift Online account:</simpara>
<orderedlist numeration="loweralpha">
<listitem>
<simpara>Navigate to <link xl:href="https://manage.openshift.com/">https://manage.openshift.com/</link> in a new browser tab and log into your account.</simpara>
</listitem>
<listitem>
<simpara>Click <guibutton>OpenShift Console</guibutton> to view the console.</simpara>
</listitem>
<listitem>
<simpara>From the list of projects, click the <emphasis role="strong">username-jenkins</emphasis> option.</simpara>
</listitem>
<listitem>
<simpara>Click <literal>Builds</literal> and then <literal>Builds</literal> again in the menu options. Your project&#8217;s new build is listed here and you can use this console to monitor its progress.</simpara>
</listitem>
</orderedlist>
</listitem>
</orderedlist>
<simpara>TODO with modules</simpara>
</section>
</chapter>
</part>
</book>